---
layout: post
title: 'Promise原理分析与实现'
date: 2020-04-15
author: 'Yeqiang'
tags:
  - JS
---

首先先复习下 Promise 的一些特性，1.有 3 种状态，pending，resolved，rejected 且状态改变后无法再次变化。2.then 方法会同样返回一个新的 promise 对象  
那可以以此先设计出大致的框架

```js
function myPromise(fn) {
  let self = this
  self.status = 'pending'
  self.data = null
  self.onResolvedCb = []
  self.onRejectedCb = []
  function resolve(value) {}
  function reject(reason) {}
  try {
    fn(resolve, reject)
  } catch {
    reject(e)
  }
}
```

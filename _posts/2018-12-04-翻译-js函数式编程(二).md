---
layout: post
title: "js函数式编程(二)：Function的本质"
date: 2018-11-08
author: "Yeqiang"
tags:
  - 翻译
---

[原文链接](https://github.com/getify/Functional-Light-JS/blob/master/manuscript/ch2.md/#chapter-2-the-nature-of-functions)

## 第二章：Functions 的本质

FP 不仅仅是使用`function`关键词编程。如果就这么简单的话--我在这里就能结束这本书了。尽管如此，functions 是 FP 的核心。并且我们如何使用 functions 影响到我们的代码是否函数式。  
但是你有多确定你明白 function 真正的含义吗？  
在这一章中，我们将通过探索所有关于 functions 的基础概念来为我们接下来的内容打好基础。事实上，这是一次即使是没用过 FP 的开发者也应该知道的关于 functions 的概念的复习。但是如果我们想要充分了解 FP 的概念，那我们就必须从内到外的了解 functions。  
振作起来，因为这里有许多超过你认识的关于 function 的知识。

### 什么是 function？

“什么是 function”这个问题表面上似乎有一个很明显的答案：一个 function 是代码的集合，可以被运行一次或多次。  
虽然这个定义很合理，但它遗漏了一些非常重要的本质，就是这些本质构成了 FP 中的 function 的核心。因此，让我们深入挖掘来更完全的立即 function。

### 简短的数学复习

我知道我承诺我们会  尽量远离数学，但是在我们继续下面的内容之前先暂时忍耐一会，我们会快速的观察一些关于 function 的基础事实和代数图表。  
你还记得你之前在学校学习的`f(x)`吗？那`y=f(x)`方程呢？  
我们先定义一个方程式比如：`f(x)=2x²+3`。这意味着什么？它的图表是怎样的？下面是图表：
![图表1](/img/in-post/FP/fig2.png)
你可以注意到，对于任意一个`x`的值，比如`2`，如果你把它放到方程式里，你得到`11`，然而`11`是什么？它是`f(x)`的返回值，也就是我们之前说的`y`值。  
换句话说，我们可以把这个输入输出看作是这个图表的曲线上的位于`(2,11)`的一个点。并且对于我们每一个带入的`x`值，我们都能得到一个`y`值作为坐标值。一个是`(0,3)`，另一个是`(-1,5)`。把这些点放在一起，我们就能得到上图所示的抛物曲线图。  
所以这些和 FP 有什么关系呢？
在数学中，一个函数总是接受输入，并且总是给出输出。关于 FP 你会经常听到一个术语，“同态”；这是一个奇特的描述一组值映射到另一组值的方式，就像一个函数的输入与这个函数的输出有关系。  
在代数数学中，那些输入和输出通常被解释为要绘制的坐标的分量。但是，在我们的程序中，我们可以定义具有各种类型的输入输出的函数，即使它们中只有很少的才能被绘制成曲线图。

### 函数 vs 程序

所以为什么都在讨论数学和图表？因为 FP 的本质就是像数学意义上的*函数*一样来使用函数。  
你可能更习惯于以程序里的函数来思考。不同点在哪呢？一个程序是一个随意的功能的集合。它可能有输入，也可能没有。它可能有输出(`return` value)，也可能没有。  
一个函数接受输入并且一定会有`return`返回值。
如果你计划使用FP，**你应该尽量使用函数**，并且在任何地方都尽量避免程序。所有你的`函数`都一个接收输入，返回输出。  
为什么？关于这个的问题的答案有很多层，我们会在后面的内容一一解释。

### 函数输入

目前为止，我们可以认为函数必须有输入。但是让我们深入挖掘函数的输入是如何工作的。  
你有时候会听到其他人把输入叫做“arguments”或者是“parameters”。所以这些都代表了什么呢？  
Arguments是你传入的值，而parameters是在函数内部接收传入的值的被命名的变量。例子如下：
```js
function foo(x,y) {
    // ..
}

var a = 3;

foo( a, a * 2 );
```
`a`和`a * 2`对于`foo(..)`函数就是arguments，`x`和`y`就是接收arguments值的parameter是。  
笔记：在js中，并没有规定arguments的数量和parameters的数量一致。如果你传入的arguments数量超过了你用来接收的parameters的数量，传入的值也不会改变。这些值可能通过几种不同的方式访问到，包括你可能听过的学院派的`arguments`对象。如果你传入的arguments少于声明的parameters，那些没有对应的parameter会被赋值为“undefined”，表示这些值在这个函数的作用域里是可以访问的，只是值为”undefined“。  

### 默认参数
在ES6中，可以为参数设置默认值。以防对应的实参没有传入，或者传了undefined，这样会用默认表达式代替。  
如下：
```js
function foo(x = 3) {
    console.log( x );
}
foo();                  // 3
foo( undefined );       // 3
foo( null );            // null
foo( 0 );               // 0
```
总是考虑所有可以提高你的函数的可用性的默认值是一个好的习惯。但是，设置默认值可能会提高阅读代码和理解这个方法是如何调用的复杂性。根据自身情况谨慎使用这个功能。

### 计算输入
一个函数期望的argument的数量--你想要传入的arguments的数量